# Configuration for the RPi Sensor Streamer

[app]
data-producer-loop-ms = 100

[app.topics]
lidar-tof050c = "lidar/tof050c"
imu-1 = "imu/1"

[zeromq]
data-publisher-address = "tcp://127.0.0.1:5559"

[webrtc]
stun-server = "stun:stun.l.google.com:19302"
bitrate = 2000000 # bits per second (2 Mbps)
queue-buffers = 10 # Number of frames to buffer
mtu = 1400 # Maximum transmission unit for RTP packets
default_latency_ms = 200
enable_rtcp_feedback = true
jitter_buffer_latency_ms = 100

[video]
codec = "vp8" # Codec: "vp8" or "h264"
encoder-preset = "fast" # Encoder preset: "realtime", "good", "best"
keyframe-interval = 30 # Keyframe interval in frames
cpu-used = 8 # CPU usage setting for VP8 (higher = faster, lower quality)

[camera-1]
device = "/base/axi/pcie@1000120000/rp1/i2c@88000/imx219@10"
width = 640
height = 480
target-width = 640
target-height = 480
fps = 30
flip-method = "rotate-180"

[camera-1.crop]
x = 0
y = 0
width = 640
height = 480

[camera-2]
device = "/base/axi/pcie@1000120000/rp1/i2c@80000/imx219@10"
width = 640
height = 480
target-width = 640
target-height = 480
fps = 30
flip-method = "rotate-180"

[camera-2.crop]
x = 0
y = 0
width = 640
height = 480

[lidar-tof050c]
i2c-bus = 1
enable-pin = 17 # GPIO17

[lidar-tof400c]
i2c-bus = 1
enable-pin = 27 # GPIO27
new-i2c-address = 0x2A

[imu-1]
i2c-bus = 0
address = 0x68

# GStreamer debug configuration for memory leak detection
[debug]
enable_memory_monitoring = true
memory_check_interval_seconds = 60
max_memory_usage_mb = 512  # Alert if memory exceeds this limit
gst_debug_level = 2  # Reduced from default to minimize overhead 